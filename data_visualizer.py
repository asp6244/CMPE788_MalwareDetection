import matplotlib.pyplot as plt


def plot_figure(loss_list, accuracy_list, titles, x_label, figsize=(8, 8)):
    """
    show Cross Entropy Loss graph and mean per-class accuracy
    """
    plt.figure(figsize=figsize)
    plt.subplots_adjust(hspace=0.3)

    ax = plt.subplot(2, 1, 1)
    for testLosses in loss_list:
        plt.plot(range(len(testLosses[0])), testLosses[0], label=testLosses[1])
    plt.xlabel(x_label)
    plt.ylabel("Cross Entropy Loss")
    plt.title(titles[0])
    if len(loss_list) > 3:
        box = ax.get_position()
        ax.set_position([box.x0, box.y0, box.width * 0.8, box.height])
        # Put a legend to the right of the current axis
        ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))
    else:
        plt.legend()

    ax = plt.subplot(2, 1, 2)
    for testAccs in accuracy_list:
        plt.plot(range(len(testAccs[0])), testAccs[0], label=testAccs[1])
    plt.xlabel(x_label)
    plt.ylabel("Mean Accuracy")
    plt.ylim([0.4, 1.0])
    plt.title(titles[1])
    if len(accuracy_list) > 3:
        box = ax.get_position()
        ax.set_position([box.x0, box.y0, box.width * 0.8, box.height])
        # Put a legend to the right of the current axis
        ax.legend(loc='center left', bbox_to_anchor=(1, 0.5))
    else:
        plt.legend()
